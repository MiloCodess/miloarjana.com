<!-- Lava Lamp Container -->
<div class="my-lava-lamp">
  <div class="lava-lamp">
    <div class="lava-lamp__main">
      <div class="lava-lamp__glass">
        <!-- Lava blobs will be inserted here -->
      </div>
    </div>
    <div class="lava-lamp__base"></div>
  </div>

  <!-- SVG Filter for Gooey Effect -->
  <svg style="position: absolute; left: 100%;">
    <defs>
      <filter id="goo-unique">
        <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="BLUR"></feGaussianBlur>
        <feColorMatrix in="BLUR" mode="matrix"
          values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" result="GOO"></feColorMatrix>
        <feBlend in="SourceGraphic" in2="GOO"></feBlend>
      </filter>
    </defs>
  </svg>
</div>

<!-- JavaScript to Generate Lava Blobs -->
<script>
  (function() {
    const height = 400;
    const width = 150;
    const inRange = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;

    function lava(amount) {
      const lavaLampGlass = document.querySelector('.my-lava-lamp .lava-lamp__glass');
      const lavaLampLava = document.createElement('div');
      lavaLampLava.classList.add('lava-lamp__lava');

      const svgNS = "http://www.w3.org/2000/svg";
      const svg = document.createElementNS(svgNS, 'svg');

      // Top Ellipse Blob
      const ellipseTop = document.createElementNS(svgNS, 'ellipse');
      ellipseTop.setAttribute('class', 'blob blob--top');
      ellipseTop.setAttribute('cx', '35');
      ellipseTop.setAttribute('cy', '0');
      ellipseTop.setAttribute('rx', '35');
      ellipseTop.setAttribute('ry', '10');
      svg.appendChild(ellipseTop);

      // Bottom Ellipse Blob
      const ellipseBottom = document.createElementNS(svgNS, 'ellipse');
      ellipseBottom.setAttribute('class', 'blob blob--bottom');
      ellipseBottom.setAttribute('cx', '75');
      ellipseBottom.setAttribute('cy', '270');
      ellipseBottom.setAttribute('rx', '75');
      ellipseBottom.setAttribute('ry', '10');
      svg.appendChild(ellipseBottom);

      // Randomly Generated Circle Blobs
      for (let i = 0; i < amount; i++) {
        const speed = inRange(8, 50);
        const delay = inRange(0, 10) - 10;
        const heightValue = inRange(30, 100);
        const skewX = inRange(0, 10) - 5;
        const skewY = inRange(0, 10) - 5;
        const x = inRange(0, 150);
        const direction = Math.random() > 0.5 ? 'alternate' : 'alternate-reverse';

        const circle = document.createElementNS(svgNS, 'circle');
        circle.setAttribute('class', 'blob');
        circle.setAttribute('r', heightValue / 2);
        circle.setAttribute('cx', x);
        circle.setAttribute('cy', '400');
        circle.setAttribute('style', `
          --skewX: ${skewX};
          --skewY: ${skewY};
          --height: ${heightValue};
          --speed: ${speed};
          --delay: ${delay};
          --direction: ${direction};
        `);
        svg.appendChild(circle);
      }

      lavaLampLava.appendChild(svg);
      lavaLampGlass.appendChild(lavaLampLava);
    }

    // Initialize Lava Lamp Blobs on DOM Content Loaded
    document.addEventListener('DOMContentLoaded', function() {
      lava(3);
      lava(4);
      lava(2);
      lava(1);
    });
  })();
</script>

<!-- Lava Lamp Styles -->
<style>
  /* CSS Variables Scoped to Lava Lamp */
  .my-lava-lamp {
    --lamp: #000;
    --shadow: #f3fe19;
    --core: #797b2c;
    --lava: #f1f129;
    --lava-bg: radial-gradient(circle at 50% 50%, var(--core) 25%, var(--shadow));
    position: relative;
  }

  /* Lava Lamp Styles */
  .my-lava-lamp .lava-lamp {
    --height: 400;
    --width: 150;
    height: calc(var(--height) * 1px);
    width: calc(var(--width) * 1px);
    position: relative;
  }

  .my-lava-lamp .lava-lamp::after {
    content: '';
    height: 500px;
    width: 500px;
    position: absolute;
    background: radial-gradient(circle at 50% 50%, var(--shadow), transparent 60%);
    top: 45%;
    left: 50%;
    z-index: 4;
    transform: translate(-50%, -50%);
    filter: blur(10px);
    opacity: 0.5;
  }

  .my-lava-lamp .lava-lamp::before {
    content: '';
    height: 25%;
    width: 300%;
    border-radius: 100%;
    background: radial-gradient(ellipse at 50% 50%, var(--shadow), transparent 60%);
    position: absolute;
    top: 85%;
    left: 50%;
    transform: translate(-50%, 0);
    opacity: 0.5;
    filter: blur(10px);
  }

  .my-lava-lamp .lava-lamp__main {
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    width: 100%;
    height: 100%;
    position: relative;
    overflow: hidden;
    z-index: 2;
  }

  .my-lava-lamp .lava-lamp__main::after,
  .my-lava-lamp .lava-lamp__main::before {
    background: var(--lamp);
    content: '';
    height: 12%;
    left: 0;
    position: absolute;
    width: 100%;
  }

  .my-lava-lamp .lava-lamp__main::after {
    top: 0;
  }

  .my-lava-lamp .lava-lamp__main::before {
    bottom: 0;
    height: 26%;
  }

  .my-lava-lamp .lava-lamp__glass {
    background: var(--lava-bg);
    border-radius: 50% / 10%;
    overflow: hidden;
    height: 70%;
    left: 0;
    position: absolute;
    top: 10%;
    width: 100%;
    z-index: 2;
  }

  .my-lava-lamp .lava-lamp__base {
    height: 20%;
    width: 100%;
    position: absolute;
    bottom: 0;
    overflow: hidden;
    border-radius: 0 0 50% 50% / 0 0 35% 35%;
  }

  .my-lava-lamp .lava-lamp__base::before {
    content: '';
    background: var(--lamp);
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    position: absolute;
    top: -60%;
    height: calc(var(--height) * 1px);
    width: calc(var(--width) * 1px);
  }

  .my-lava-lamp .lava-lamp__lava {
    border-radius: 50% / 10%;
    height: 100%;
    overflow: hidden;
    position: absolute;
    width: 100%;
    filter: url('#goo-unique');
  }

  .my-lava-lamp .lava-lamp__lava svg {
    height: 280px;
    width: 150px;
  }

  .my-lava-lamp .blob {
    animation-delay: calc(var(--delay) * 1s);
    animation-direction: var(--direction);
    animation-duration: calc(var(--speed) * 1s);
    animation-iteration-count: infinite;
    animation-name: blob-unique;
    animation-timing-function: linear;
    fill: var(--lava);
    transform-box: fill-box;
  }

  .my-lava-lamp .blob--bottom,
  .my-lava-lamp .blob--top {
    animation: none;
  }

  .my-lava-lamp .blob--top {
    animation: sway-unique 20s infinite linear;
  }

  /* Unique Keyframes to Avoid Conflicts */
  @keyframes sway-unique {
    50% {
      transform: translate(50%, 0);
    }
  }

  @keyframes blob-unique {
    from {
      transform: skew(calc(var(--skewX) * 1deg), calc(var(--skewY) * 1deg)) translate(0, 0);
    }
    to {
      transform: skew(calc(var(--skewX) * 1deg), calc(var(--skewY) * 1deg))
        translate(0, calc((400 + (var(--height) * 2)) * -1px));
    }
  }
</style>
